# 观察者模式

## 定义
定义对象之间的一种一对多依赖关系，使得当一个对象的状态改变时，其相关依赖对象皆能得到通知并自动更新。

## 结构
Subject(抽象目标)：又称主题，是被观察的对象。
ConcreteSubject(具体目标)：抽象目标的子类，通常包含有经常发生改变的数据，当它的状态发生改变时，向其各个观察者发出通知。
Observer(抽象观察者)：观察者将对观察目标的改变做出反应。
ConcreteObserver：具体观察者中维持一个指向具体目标对象的引用，它用于存储具体观察者的有关状态，这些状态需要和具体目标状态保持一致。

## 优点
* 可以实现表示层和数据逻辑层的分离，观察者和目标是松耦合的
* 支持广播通信，主题会向已注册的观察者发送通知
* 增加新的观察者无需修改原有的系统代码

## 缺点
* 如果一个目标有很多个直接和间接的观察者，所有观察者收到通知会花费大量的时间(可以通过异步的方式解决)
* 如果主题和观察者之间存在循环依赖，可能导致系统崩溃
* 如果忘记删除不必要的观察者，容易误发消息

## 应用场景
一个抽象模型有两个方面，其中一个方面依赖于另一个方面，封装起来使其独立改变和复用
一个对象的改变将导致一个或多个对象的改变，但不知道具体有多少个对象将要发生改变
当一个对象必须通知其他对象，但是你又希望这个对象和被通知对象是松耦合的

## 个人总结
* 观察者模式有两种方式
   * 推送模式：目标向观察者主动推送消息
     优点：获取消息及时，目标一有变动就会被观察者知道
     缺点：观察者不需要一些消息时，会被迫收到很多不必要的信息
   * 获取模式：观察者像目标获取消息
     优点：需要就获取，不需要就不获取，比较灵活
     缺点：如果不获取，那么有些消息就不会知道